{
  "hash": "a0e1f0ba9b03f07619736e4ee5a098ef",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"VizCode\"\nexecute:\n  freeze: auto\n---\n\n\n::: {.cell}\n\n:::\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#| label: ApprovalRating\n\n# PresJobApprovalD <- PresJobApproval |>\n#   slice(rep(1:n(), each = 2))|>\n#   filter(!is.na(X.1))\n# \n# \n# \n# bandsadmin <- data.frame(\n#   start = c(1950, 1953, 1961,1969, 1977, 1981, 1993, 2001, 2009, 2017, 2021),\n#   end = c(1953, 1961, 1969,1977, 1981, 1993, 2001, 2009, 2017, 2021, 2025),\n#   period = c(\"Democratic\", \"Republican\", \"Democratic\",\"Republican\", \"Democratic\", \"Republican\",\"Democratic\",\"Republican\", \"Democratic\", \"Republican\", \"Democratic\"),\n#   color = c(\"#1313F7\", \"#F7000D\", \"#1313F7\",\"#F7000D\",\"#1313F7\",\"#F7000D\", \"#1313F7\", \"#F7000D\", \"#1313F7\", \"#F7000D\",\"#1313F7\"))\n# \n# \n# ggplot(PresJobApproval, aes(x = YEAR, y = Fertility)) +\n#   geom_rect(\n#     data = bandsadmin,\n#     aes(xmin = start, xmax = end, ymin = -Inf, ymax = Inf, fill = period),\n#     alpha = 0.5,\n#     inherit.aes = FALSE)+\n#   geom_line(color = \"#460001\", size = 1) +\n#   geom_hline(yintercept = 2.1, linetype = \"dashed\", color = \"blue\") +\n#   annotate(\"text\", x = 1955, y = 2.15, label = \"Replacement Level (2.1)\", color = \"black\", hjust = -.75, vjust = .25) +\n#   scale_fill_manual(values = bands$color) +\n#   labs(\n#     y = \"National Average Birthrate (Births Per Woman)\",\n#     x = \"Year\",\n#     fill = \"Historical Periods\",\n#     title = \"American Birthrates, (1950-2024)\",\n#     subtitle = \"Births per individual woman\")+\n# theme_minimal()+\n# theme(plot.margin = margin(10, 10, 10, 10),\n#       aspect.ratio = 0.6,\n#       legend.position = \"bottom\")\n```\n:::\n\n\n\n\n::: {.cell}\n\n:::\n\n\n\n\n::: {.cell}\n\n:::\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#| label: CensusCleaning\n\nUSAPOPCount <- USAPOPCount |>\n  filter(AgeGroup != \"0-9\") |>\n  mutate(\n    age_group = case_when(\n      AgeGroup == \"10-19\" ~ \"10 -19 Years\",\n      AgeGroup == \"20-29\" ~ \"20 -29 Years\",\n      AgeGroup == \"30-39\" ~ \"30 -39 Years\",\n      AgeGroup == \"40-49\" ~ \"40 -49 Years\",\n      AgeGroup == \"50-59\" ~ \"50 -59 Years\",\n      AgeGroup == \"60-69\" ~ \"60 - 69 Years\",\n      AgeGroup %in% c(\n        \"70-79\", \"80-89\", \"90-99\",\n        \"100-109\", \"110-119\", \"120-129\", \"130-139\") ~ \"70 And Above\",\n      TRUE ~ NA_character_),\n  population = Count) |> \n  select(!AgeGroup) |> \n  select(!Count)\n\nCensus2020 <- read_csv(\"VizCode/Census/Census2020.csv\") |> \n  select(3,4,6,contains(\"TOT\")) |> \n  rename(age_under_5   = UNDER5_TOT,\n    rrr1      = AGE513_TOT,\n    rrr2     = AGE1417_TOT,\n    rrr3     = AGE1824_TOT,\n    rrr4   = AGE16PLUS_TOT,\n    rrr5   = AGE18PLUS_TOT,\n    rrr6     = AGE1544_TOT,\n    rrr8     = AGE2544_TOT,\n    rrr9     = AGE4564_TOT,\n    rrr0   = AGE65PLUS_TOT,\n    rrr01 = MEDIAN_AGE_TOT) |> \n  select(!contains(\"rrr\")) |>\n  mutate(YEAR = case_when(\n    YEAR == 1 ~ 2020,\n    YEAR == 4 ~ 2022,\n    YEAR == 6 ~ 2024,\n    TRUE ~ NA_real_\n  )) |> \n  filter(!is.na(YEAR))\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 18864 Columns: 96\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (5): SUMLEV, STATE, COUNTY, STNAME, CTYNAME\ndbl (91): YEAR, POPESTIMATE, POPEST_MALE, POPEST_FEM, UNDER5_TOT, UNDER5_MAL...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code}\n#| label: CensusCleaning\n\nCensus2010 <- read_csv(\"VizCode/Census/Census2010.csv\") |> \n  select(3,4,6,contains(\"TOT\")) |> \n  rename(age_under_5   = UNDER5_TOT,\n    rrr1      = AGE513_TOT,\n    rrr2     = AGE1417_TOT,\n    rrr3     = AGE1824_TOT,\n    rrr4   = AGE16PLUS_TOT,\n    rrr5   = AGE18PLUS_TOT,\n    rrr6     = AGE1544_TOT,\n    rrr8     = AGE2544_TOT,\n    rrr9     = AGE4564_TOT,\n    rrr0   = AGE65PLUS_TOT,\n    rrr01 = MEDIAN_AGE_TOT) |> \n  select(!contains(\"rrr\")) |> \n  mutate(YEAR = case_when(\n    YEAR == 3 ~ 2010,\n    YEAR == 4 ~ 2011,\n    YEAR == 5 ~ 2012,\n    YEAR == 6 ~ 2013,\n    YEAR == 7 ~ 2014,\n    YEAR == 8 ~ 2015,\n    YEAR == 9 ~ 2016,\n    YEAR == 10 ~ 2017,\n    YEAR == 11 ~ 2018,\n    YEAR == 12 ~ 2019,\n    TRUE ~ NA_real_\n  ),\n  COUNTY = as.character(COUNTY)) |> \n  filter(!is.na(YEAR))\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: One or more parsing issues, call `problems()` on your data frame for details,\ne.g.:\n  dat <- vroom(...)\n  problems(dat)\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 44002 Columns: 96\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (2): STNAME, CTYNAME\ndbl (94): SUMLEV, STATE, COUNTY, YEAR, POPESTIMATE, POPEST_MALE, POPEST_FEM,...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code}\n#| label: CensusCleaning\n\nCensus2000 <-  read_xlsx(\"VizCode/Census/Census2000.xlsx\")|> \n   mutate(age_group= case_when(\n    age_group %in% c(\"10 to 14 years\",\"15 to 19 years\" ) ~ \"10 -19 Years\",\n    age_group %in% c(\"20 to 24 years\", \"25 to 29 years\") ~ \"20 -29 Years\",\n    age_group %in% c(\"30 to 34 years\", \"35 to 39 years\") ~ \"30 -39 Years\",\n    age_group %in% c(\"40 to 44 years\", \"45 to 49 years\") ~ \"40 -49 Years\",\n    age_group %in% c(\"50 to 54 years\", \"55 to 59 years\") ~ \"50 -59 Years\",\n    age_group %in% c(\"60 to 64 years\", \"65 to 69 years\") ~ \"60 - 69 Years\",\n    age_group %in% c(\"70 to 74 years\", \"75 to 79 years\", \"80 to 84 years\", \"AGE8084_TOT\", \"85 years and over\") ~ \"70 And Above\",\n    TRUE ~ NA_character_))|> \nfilter(!is.na(age_group))\n\nCensus1980 <-  read.csv(\"Vizcode/Census/Census1980.csv\") |> \n    rename(YEAR = \"Year.of.Estimate\")\n\n#cleaning 1980 sep. because of delins\n\nCensus1980 <- Census1980 |> pivot_longer(\n    cols = starts_with(\"AGE\"),\n    names_to = \"age_group\",\n    values_to = \"population\")|> \n  mutate(age_group= case_when(\n    age_group %in% c(\"AGE1014_TOT\", \"AGE1519_TOT\") ~ \"10 -19 Years\",\n    age_group %in% c(\"AGE2024_TOT\", \"AGE2529_TOT\") ~ \"20 -29 Years\",\n    age_group %in% c(\"AGE3034_TOT\", \"AGE3539_TOT\") ~ \"30 -39 Years\",\n    age_group %in% c(\"AGE4044_TOT\", \"AGE4549_TOT\") ~ \"40 -49 Years\",\n    age_group %in% c(\"AGE5054_TOT\", \"AGE5559_TOT\") ~ \"50 -59 Years\",\n    age_group %in% c(\"AGE6064_TOT\", \"AGE6569_TOT\") ~ \"60 - 69 Years\",\n    age_group %in% c(\"AGE7074_TOT\", \"AGE7579_TOT\", \"AGE8084_TOT\", \"AGE85PLUS_TOT\") ~ \"70 And Above\",\n    TRUE ~ NA_character_)) |> \n  select(1,6,7,3) |> \n  na.omit() |> \n  group_by(YEAR, age_group) |> \n  summarize(population = sum(population))\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`summarise()` has grouped output by 'YEAR'. You can override using the\n`.groups` argument.\n```\n\n\n:::\n\n```{.r .cell-code}\n#| label: CensusCleaning\n\nBirthRates <- read_csv(\"VizCode/Census/births.csv\") |> \n  rename(YEAR = Year, \n         Fertility = `Fertility Rate (Births Per Woman)`) |> \n  mutate(YEAR = as.double(YEAR),\n         FertilityA =  (Fertility - 1.62) / (3.65 - 1.62))\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 102 Columns: 2\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (1): Year\ndbl (1): Fertility Rate (Births Per Woman)\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: There was 1 warning in `mutate()`.\nℹ In argument: `YEAR = as.double(YEAR)`.\nCaused by warning:\n! NAs introduced by coercion\n```\n\n\n:::\n\n```{.r .cell-code}\n#| label: CensusCleaning\n\nCensusFull <- bind_rows(\n  Census2010,\n  Census2020) |> \n  pivot_longer(\n    cols = starts_with(\"AGE\"),\n    names_to = \"age_group\",\n    values_to = \"population\")|> \n  mutate(age_group= case_when(\n    age_group %in% c(\"AGE1014_TOT\", \"AGE1519_TOT\") ~ \"10 -19 Years\",\n    age_group %in% c(\"AGE2024_TOT\", \"AGE2529_TOT\") ~ \"20 -29 Years\",\n    age_group %in% c(\"AGE3034_TOT\", \"AGE3539_TOT\") ~ \"30 -39 Years\",\n    age_group %in% c(\"AGE4044_TOT\", \"AGE4549_TOT\") ~ \"40 -49 Years\",\n    age_group %in% c(\"AGE5054_TOT\", \"AGE5559_TOT\") ~ \"50 -59 Years\",\n    age_group %in% c(\"AGE6064_TOT\", \"AGE6569_TOT\") ~ \"60 - 69 Years\",\n    age_group %in% c(\"AGE7074_TOT\", \"AGE7579_TOT\", \"AGE8084_TOT\", \"AGE85PLUS_TOT\") ~ \"70 And Above\",\n    TRUE ~ NA_character_)) |> \nselect(3:5) |> \nfilter(!is.na(age_group))\n\n#Make 1980-2024\nCensusFull <- bind_rows(\n  CensusFull,\n  Census2000,\n  Census1980,\n  USAPOPCount)\n\n#Median Age\n\nyear <- c(1850, 1860, 1870, 1880, 1890, 1900, 1910, 1920, 1930, 1940, 1950, 1960, 1970, 1980, 1990, 2000, 2010,2020)\n\nMedAge <- c(18.9, 19.4, 20.2, 20.9, 22.0, 22.9, 24.1, 25.3, 26.5, 29.0, 30.2, 29.5, 28.1, 30.0, 32.9, 35.3, 37.2, 38.8)\n\n\nMedAgeDF <- data.frame(year, MedAge) |> \n  mutate(MedAgeScaled = (MedAge- min(MedAge))/ (max(MedAge)-min(MedAge)))\n\n\n\nrm(Census2000, Census2010, Census2020, Census1980, MedAge, year, USAPOPCount)\n```\n:::\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 14 rows containing missing values or values outside the scale range\n(`geom_area()`).\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](VizCodes_files/figure-ipynb/AgeGrpViz-1.png)\n:::\n\n::: {.cell-output-display}\n![](VizCodes_files/figure-ipynb/AgeGrpViz-2.png)\n:::\n:::\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.\nℹ Please use `linewidth` instead.\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 27 rows containing missing values or values outside the scale range\n(`geom_line()`).\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](VizCodes_files/figure-ipynb/BirthViz-1.png)\n:::\n:::\n\n\n",
    "supporting": [
      "VizCodes_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": null,
    "postProcess": false
  }
}